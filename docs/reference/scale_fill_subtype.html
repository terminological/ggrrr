<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Discrete fill or colour scale where there is a natural ordered subgrouping — scale_fill_subtype • ggrrr</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Discrete fill or colour scale where there is a natural ordered subgrouping — scale_fill_subtype" />
<meta property="og:description" content="If you have a categorical variable defining colour or fill and
it has a natural grouping you can use this to have a colour scale involving
major colors defining the major groupings, and these are progressively
lightened for each of the subcategories." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ggrrr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9009</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/ggrrr.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/cache-functions.html">Caching functions</a>
    </li>
    <li>
      <a href="../articles/figure-functions.html">Figure functions</a>
    </li>
    <li>
      <a href="../articles/font-functions.html">Font functions</a>
    </li>
    <li>
      <a href="../articles/other-table-formats.html">Other table formats</a>
    </li>
    <li>
      <a href="../articles/table-functions.html">Table functions</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Discrete fill or colour scale where there is a natural ordered subgrouping</h1>
    
    <div class="hidden name"><code>scale_fill_subtype.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>If you have a categorical variable defining colour or fill and
it has a natural grouping you can use this to have a colour scale involving
major colors defining the major groupings, and these are progressively
lightened for each of the subcategories.</p>
    </div>

    <pre class="usage"><span class='fu'>scale_fill_subtype</span><span class='op'>(</span>
  <span class='va'>.palette</span>,
  <span class='va'>subclasses</span>,
  <span class='va'>...</span>,
  undefined <span class='op'>=</span> <span class='st'>"#606060"</span>,
  lighten <span class='op'>=</span> <span class='cn'>NA</span>,
  na.value <span class='op'>=</span> <span class='st'>"grey50"</span>,
  aesthetics <span class='op'>=</span> <span class='st'>"fill"</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>.palette</th>
      <td><p>the palette for the major groupings, either as a function e.g. 'scales::viridis_pal', or as a manual set of colors e.g. 'c("#FF0000","#00FF00","#0000FF")'. if a function can be either discrete or continuous palette.</p></td>
    </tr>
    <tr>
      <th>subclasses</th>
      <td><p>a vector containing the count of the subcategories, e.g. c(2,3,4) defines 3 major categories and a total of 9 sub-categories</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>additional options to be passed to the major palette function, e.g. 'option="magma"', or to 'discrete_scale()', e.g. 'alpha=0.5'</p></td>
    </tr>
    <tr>
      <th>undefined</th>
      <td><p>If the number of sub-categories in the data is longer than defined in 'subclasses', the extra categories are assumed to be an set of "other" categories, which will be coloured using this base colour</p></td>
    </tr>
    <tr>
      <th>lighten</th>
      <td><p>The factor by which to lighten the colour at each step of the subgrouping. If left blank this will calculate a fraction based on the number of levels of the subgroup.
Otherwise if, e.g. 0.5 the first sub category will be the full saturation, the second 0.5 saturation, the third 0.25 saturation, the fourth 0.125 and so on.</p></td>
    </tr>
    <tr>
      <th>na.value</th>
      <td><p>what colour for NA values.</p></td>
    </tr>
    <tr>
      <th>aesthetics</th>
      <td><p>this is a fill scale by default but can be used for colour by setting this to "color" or both as c("fill","color")</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>a ggplot scale</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://tidyverse.tidyverse.org'>tidyverse</a></span><span class='op'>)</span>

<span class='co'># prep some data:</span>
<span class='va'>data</span> <span class='op'>=</span> <span class='va'>diamonds</span> <span class='op'>%&gt;%</span>
  <span class='fu'>mutate</span><span class='op'>(</span>color_cut <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/sprintf.html'>sprintf</a></span><span class='op'>(</span><span class='st'>"%s (%s)"</span>,<span class='va'>color</span>,<span class='va'>cut</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>group_by</span><span class='op'>(</span><span class='va'>color</span>,<span class='va'>cut</span>,<span class='va'>color_cut</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>count</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>ungroup</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>mutate</span><span class='op'>(</span>color_cut <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>ordered</a></span><span class='op'>(</span><span class='va'>color_cut</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'># work out the number of subgroups for each group:</span>
<span class='va'>subgroups</span> <span class='op'>=</span> <span class='va'>data</span> <span class='op'>%&gt;%</span>
  <span class='fu'>select</span><span class='op'>(</span><span class='va'>color</span>,<span class='va'>cut</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='va'>distinct</span> <span class='op'>%&gt;%</span>
  <span class='fu'>group_by</span><span class='op'>(</span><span class='va'>color</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>count</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>pull</span><span class='op'>(</span><span class='va'>n</span><span class='op'>)</span>

<span class='co'># plot as a horizontal stacked bar chart using color brewer as the main</span>
<span class='co'># colour axis. N.b. having enough different colours here is important</span>
<span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span><span class='va'>data</span>, <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>y<span class='op'>=</span><span class='fl'>1</span>,x<span class='op'>=</span><span class='va'>n</span>, fill<span class='op'>=</span><span class='va'>color_cut</span>, color<span class='op'>=</span><span class='va'>color_cut</span><span class='op'>)</span><span class='op'>)</span><span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_bar.html'>geom_bar</a></span><span class='op'>(</span>stat<span class='op'>=</span><span class='st'>"identity"</span>,orientation <span class='op'>=</span> <span class='st'>"y"</span><span class='op'>)</span><span class='op'>+</span>
  <span class='fu'>ggrrr</span><span class='fu'>::</span><span class='fu'>scale_fill_subtype</span><span class='op'>(</span>.palette <span class='op'>=</span> <span class='fu'>scales</span><span class='fu'>::</span><span class='va'><a href='https://scales.r-lib.org/reference/brewer_pal.html'>brewer_pal</a></span>,
    palette<span class='op'>=</span><span class='st'>"Accent"</span>, subclasses <span class='op'>=</span> <span class='va'>subgroups</span><span class='op'>)</span><span class='op'>+</span>
  <span class='fu'>ggrrr</span><span class='fu'>::</span><span class='fu'><a href='scale_colour_subtype.html'>scale_colour_subtype</a></span><span class='op'>(</span>subclasses<span class='op'>=</span><span class='va'>subgroups</span><span class='op'>)</span><span class='op'>+</span>
  <span class='fu'>ggrrr</span><span class='fu'>::</span><span class='fu'><a href='gg_hide_Y_axis.html'>gg_hide_Y_axis</a></span><span class='op'>(</span><span class='op'>)</span><span class='op'>+</span>
  <span class='fu'>ggrrr</span><span class='fu'>::</span><span class='fu'><a href='gg_narrow.html'>gg_narrow</a></span><span class='op'>(</span><span class='op'>)</span>
</div><div class='img'><img src='scale_fill_subtype-1.png' alt='' width='700' height='433' /></div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Rob Challen.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


