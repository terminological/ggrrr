<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Save a plot to multiple formats — gg_save_as • ggrrr</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Save a plot to multiple formats — gg_save_as"><meta property="og:description" content="Saves a ggplot object to disk at a set physical size. Allows specific maximum dimensions
with an optional target aspect ratio to fit into specific configurations for publication.
e.g. a half page plot or a third of a 2 column page. Allows output in pdf for journal
publication or png for inclusion in documents, and makes sure that the outputs are
near identical."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ggrrr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.0.9020</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/ggrrr.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/cache-functions.html">Caching functions</a>
    </li>
    <li>
      <a href="../articles/figure-functions.html">Figure functions</a>
    </li>
    <li>
      <a href="../articles/font-functions.html">Font functions</a>
    </li>
    <li>
      <a href="../articles/other-table-formats.html">Other table formats</a>
    </li>
    <li>
      <a href="../articles/table-functions.html">Table functions</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/terminological/ggrrr/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Save a plot to multiple formats</h1>
    <small class="dont-index">Source: <a href="https://github.com/terminological/ggrrr/blob/HEAD/R/ggplot-utils.R" class="external-link"><code>R/ggplot-utils.R</code></a></small>
    <div class="hidden name"><code>gg_save_as.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Saves a ggplot object to disk at a set physical size. Allows specific maximum dimensions
with an optional target aspect ratio to fit into specific configurations for publication.
e.g. a half page plot or a third of a 2 column page. Allows output in pdf for journal
publication or png for inclusion in documents, and makes sure that the outputs are
near identical.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">gg_save_as</span><span class="op">(</span></span>
<span>  <span class="va">plot</span>,</span>
<span>  filename <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  size <span class="op">=</span> <span class="va">std_size</span><span class="op">$</span><span class="va">half</span>,</span>
<span>  maxWidth <span class="op">=</span> <span class="va">size</span><span class="op">$</span><span class="va">width</span>,</span>
<span>  maxHeight <span class="op">=</span> <span class="va">size</span><span class="op">$</span><span class="va">height</span>,</span>
<span>  aspectRatio <span class="op">=</span> <span class="va">maxWidth</span><span class="op">/</span><span class="va">maxHeight</span>,</span>
<span>  formats <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"ggrrr.formats"</span>, default <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"svg"</span>, <span class="st">"png"</span>, <span class="st">"pdf"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>plot</dt>
<dd><p>a GGplot object or none</p></dd>


<dt>filename</dt>
<dd><p>base of target filename (excluding extension).</p></dd>


<dt>size</dt>
<dd><p>a standard size see `std_size`</p></dd>


<dt>maxWidth</dt>
<dd><p>maximum width in inches</p></dd>


<dt>maxHeight</dt>
<dd><p>maximum height in inches</p></dd>


<dt>aspectRatio</dt>
<dd><p>defaults to maxWidth/maxHeight</p></dd>


<dt>formats</dt>
<dd><p>some of svg, png, pdf, Rdata, ...</p></dd>


<dt>...</dt>
<dd><p>Arguments passed on to <code><a href="https://svglite.r-lib.org/reference/svglite.html" class="external-link">svglite::svglite</a></code></p><dl><dt><code>height,width</code></dt>
<dd><p>Height and width in inches.</p></dd>

    <dt><code>bg</code></dt>
<dd><p>Default background color for the plot (defaults to "white").</p></dd>

    <dt><code>pointsize</code></dt>
<dd><p>Default point size.</p></dd>

    <dt><code>standalone</code></dt>
<dd><p>Produce a standalone svg file? If <code>FALSE</code>, omits
xml header and default namespace.</p></dd>

    <dt><code>system_fonts</code></dt>
<dd><p><a href="https://lifecycle.r-lib.org/articles/stages.html#superseded" class="external-link"><img src="figures/lifecycle-superseded.svg" alt="[Superseded]"></a> <em>Consider using
<code><a href="https://rdrr.io/pkg/systemfonts/man/register_font.html" class="external-link">systemfonts::register_font()</a></code> instead</em>. Named list of font
names to be aliased with fonts installed on your system. If unspecified,
the R default families <code>sans</code>, <code>serif</code>, <code>mono</code> and
<code>symbol</code> are aliased to the family returned by
<code><a href="https://rdrr.io/pkg/systemfonts/man/font_info.html" class="external-link">font_info</a>()</code>.</p></dd>

    <dt><code>user_fonts</code></dt>
<dd><p><a href="https://lifecycle.r-lib.org/articles/stages.html#superseded" class="external-link"><img src="figures/lifecycle-superseded.svg" alt="[Superseded]"></a> <em>Consider using
<code><a href="https://rdrr.io/pkg/systemfonts/man/register_font.html" class="external-link">systemfonts::register_font()</a></code> instead</em>. Named list of fonts to
be aliased with font files provided by the user rather than fonts properly
installed on the system. The aliases can be fonts from the fontquiver
package, strings containing a path to a font file, or a list containing
<code>name</code> and <code>file</code> elements with <code>name</code> indicating
the font alias in the SVG output and <code>file</code> the path to a
font file.</p></dd>

    <dt><code>web_fonts</code></dt>
<dd><p>A list containing web fonts to use in the SVG. The fonts
will still need to be available locally on the computer running the code,
but viewers of the final SVG will not need the font if specified as a web
font. Web fonts can either be specified using <code><a href="https://svglite.r-lib.org/reference/font_face.html" class="external-link">font_face()</a></code> or given as a
single string in which case they are taken to be URL's for an <code>@import</code>
directive to e.g. Google Fonts.</p></dd>

    <dt><code>id</code></dt>
<dd><p>A character vector of ids to assign to the generated SVG's. If
creating more SVG files than supplied ids the exceeding SVG's will not have
an id tag and a warning will be thrown.</p></dd>

    <dt><code>fix_text_size</code></dt>
<dd><p>Should the width of strings be fixed so that it doesn't
change between svg renderers depending on their font rendering? Defaults to
<code>TRUE</code>. If <code>TRUE</code> each string will have the <code>textLength</code> CSS property set
to the width calculated by systemfonts and
<code>lengthAdjust='spacingAndGlyphs'</code>. Setting this to <code>FALSE</code> can be
beneficial for heavy post-processing that may change content or style of
strings, but may lead to inconsistencies between strings and graphic
elements that depend on the dimensions of the string (e.g. label borders
and background).</p></dd>

    <dt><code>scaling</code></dt>
<dd><p>A scaling factor to apply to the rendered line width and text
size. Useful for getting the right sizing at the dimension that you
need.</p></dd>

    <dt><code>always_valid</code></dt>
<dd><p>Should the svgfile be a valid svg file while it is being
written to? Setting this to <code>TRUE</code> will incur a considerable performance
hit (&gt;50% additional rendering time) so this should only be set to <code>TRUE</code>
if the file is being parsed while it is still being written to.</p></dd>

    <dt><code>file</code></dt>
<dd><p>Identical to <code>filename</code>. Provided for backward compatibility.</p></dd>

  
</dl></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>the output is an sensible default object that can be displayed given the context it is called in,
for example if knitting an RMarkdown document a link to the png file for embedding, if latex
a link to the pdf file.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>For maximum cross platform reproducibility we are using the combination of
`systemfonts` for font management, `svglite` to render the canonical output
`rsvg` to convert that to pdf, and `pdftools` to convert pdf to bitmap formats.
In some situations `rsvg` fails in which case we fall back to rendering in a
headless chrome instance. This rather complicated pipeline ensures modern
webfont support.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="gg_pedantic.html">gg_pedantic</a></span><span class="op">(</span> <span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">p</span> <span class="op">=</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">mtcars</span>, <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">mpg</span>, <span class="va">wt</span>, colour<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="va">cyl</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># p %&gt;% gg_save_as(filename="~/tmp/plot_example",maxWidth=4,maxHeight=4)</span></span></span>
<span class="r-in"><span><span class="va">p</span> <span class="op"><a href="pipe.html">%&gt;%</a></span> <span class="fu">gg_save_as</span><span class="op">(</span>filename<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "a ggplot with 3 outputs:"                </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2] "svg: /tmp/RtmpY2Njzo/file7afe9beb253.svg"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3] "pdf: /tmp/RtmpY2Njzo/file7afe9beb253.pdf"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [4] "png: /tmp/RtmpY2Njzo/file7afe9beb253.png"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">plot</span> <span class="op">=</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu">ggplot2</span><span class="fu">::</span><span class="va"><a href="https://ggplot2.tidyverse.org/reference/diamonds.html" class="external-link">diamonds</a></span>, <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">carat</span>,y<span class="op">=</span><span class="va">price</span>,color <span class="op">=</span> <span class="va">color</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span>base_family<span class="op">=</span><span class="fu"><a href="check_font.html">check_font</a></span><span class="op">(</span><span class="st">"Roboto"</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/annotate.html" class="external-link">annotate</a></span><span class="op">(</span><span class="st">"label"</span>,x<span class="op">=</span><span class="fl">2</span>,y<span class="op">=</span><span class="fl">10000</span>,label<span class="op">=</span><span class="st">"Hello \u2014 world"</span>, family<span class="op">=</span><span class="fu"><a href="check_font.html">check_font</a></span><span class="op">(</span><span class="st">"Kings"</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>tag <span class="op">=</span> <span class="st">"A"</span><span class="op">)</span><span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">xlab</a></span><span class="op">(</span><span class="st">"Carat\u2082"</span><span class="op">)</span><span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ylab</a></span><span class="op">(</span><span class="st">"price\u2265"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># plot %&gt;% gg_save_as(filename="~/tmp/plot_example_2")</span></span></span>
<span class="r-in"><span><span class="va">res</span> <span class="op">=</span> <span class="va">plot</span> <span class="op"><a href="pipe.html">%&gt;%</a></span> <span class="fu">gg_save_as</span><span class="op">(</span>filename<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="op">)</span>, formats<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"png"</span>,<span class="st">"ps"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">res</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "a ggplot with 2 outputs:"               </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2] "ps: /tmp/RtmpY2Njzo/file7afee877f1.ps"  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3] "png: /tmp/RtmpY2Njzo/file7afee877f1.png"</span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Robert Challen.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

